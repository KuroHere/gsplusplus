/*
 * Decompiled with CFR 0.152.
 */
package com.gamesense.client.module.modules.exploits;

import com.gamesense.api.util.misc.MessageBus;
import com.gamesense.client.module.Category;
import com.gamesense.client.module.Module;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraft.util.NonNullList;
import net.minecraft.util.math.BlockPos;

@Module.Declaration(name="RubberBand", category=Category.Exploits)
public class RubberBand
extends Module {
    @Override
    protected void onEnable() {
        RubberBand.getPacket(false, false);
        this.disable();
    }

    public static BlockPos findHoles(Boolean positive) {
        int i;
        NonNullList holes = NonNullList.func_191196_a();
        int n = i = positive == false ? -90 : 2;
        while (i < 90) {
            if (!new BlockPos(RubberBand.mc.field_71439_g.field_70165_t, RubberBand.mc.field_71439_g.field_70163_u + (double)i, RubberBand.mc.field_71439_g.field_70161_v).equals((Object)new BlockPos(RubberBand.mc.field_71439_g.func_174791_d())) && RubberBand.mc.field_71441_e.func_175623_d(new BlockPos(RubberBand.mc.field_71439_g.field_70165_t, RubberBand.mc.field_71439_g.field_70163_u + (double)i, RubberBand.mc.field_71439_g.field_70161_v))) {
                holes.add((Object)new BlockPos(RubberBand.mc.field_71439_g.field_70165_t, RubberBand.mc.field_71439_g.field_70163_u + (double)i, RubberBand.mc.field_71439_g.field_70161_v));
            }
            ++i;
        }
        for (BlockPos pos : holes) {
            if (!RubberBand.mc.field_71441_e.func_175623_d(pos) || !RubberBand.mc.field_71441_e.func_175623_d(pos.func_177982_a(0, 1, 0)) || !(pos.func_185332_f((int)RubberBand.mc.field_71439_g.field_70165_t, (int)RubberBand.mc.field_71439_g.field_70163_u, (int)RubberBand.mc.field_71439_g.field_70161_v) >= 3.0) || Math.floor(pos.field_177960_b) == Math.floor(RubberBand.mc.field_71439_g.field_70163_u)) continue;
            holes.add((Object)pos);
            break;
        }
        try {
            return (BlockPos)holes.get(holes.size() - 1);
        }
        catch (Exception e) {
            if (holes.isEmpty()) {
                return new BlockPos(RubberBand.mc.field_71439_g.field_70165_t, RubberBand.mc.field_71439_g.field_70163_u + 1.0, RubberBand.mc.field_71439_g.field_70161_v);
            }
            return (BlockPos)holes.get(0);
        }
    }

    public static void getPacket(Boolean debug, Boolean positive) {
        BlockPos pos = RubberBand.findHoles(positive);
        if (debug.booleanValue()) {
            MessageBus.sendClientPrefixMessage("Pos: " + (Math.floor(pos.field_177962_a) + 0.5) + " " + Math.floor(pos.field_177960_b) + " " + (Math.floor(pos.field_177961_c) + 0.5) + " " + RubberBand.mc.field_71441_e.func_175623_d(pos.func_177977_b()));
        }
        RubberBand.mc.field_71439_g.field_71174_a.func_147297_a((Packet)new CPacketPlayer.Position(Math.floor(pos.field_177962_a) + 0.5, Math.floor(pos.field_177960_b), Math.floor(pos.field_177961_c) + 0.5, RubberBand.mc.field_71441_e.func_175623_d(pos.func_177977_b())));
    }
}

